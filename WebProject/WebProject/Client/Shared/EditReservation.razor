@inject IJSRuntime JSRuntime
@inject IReservationService ReservationService

<h3>Book a reservation</h3>

<EditForm Model="@r" OnSubmit="@HandleSubmit">
    <div class="form-group">
        <label>Ship ID</label>
        <InputNumber @bind-Value="SelectedShip.Id" class="form-control"></InputNumber>
    </div>
    <div class="form-group">
        <label>Book from:</label>
        <InputDate @bind-Value="r.FromDate" class="form-control"></InputDate>
    </div>
    <div class="form-group">
        <label>Book until</label>
        <InputDate @bind-Value="r.ToDate" class="form-control"></InputDate>
    </div>
    <button type="submit" class="btn btn-primary">Book this!</button>
</EditForm>


@code {
    [Parameter]
    public ApplicationUserDTO PersonLoggedOn { get; set; }

    //TODO is it ok as static field?
    [Parameter]
    public ShipDTO SelectedShip { get; set; }

    private ReservationPostDTO r = new ReservationPostDTO
    {
        FromDate = DateTime.Today,
        ToDate = DateTime.Today.AddDays(1),
        //TODO get and set the current Ship and Person here
    };


    async void HandleSubmit()
    {
        await JSRuntime.InvokeVoidAsync("console.log", r);

        await ReservationService.CreateReservation(r);
    }
}
